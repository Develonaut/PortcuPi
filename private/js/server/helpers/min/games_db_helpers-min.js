var request=require("request"),parseString=require("xml2js").parseString,_=require("underscore"),db_helper_vars={base_image_url:"http://thegamesdb.net/banners/"};module.exports={getGameList:function(t,e){request("http://thegamesdb.net/api/GetGamesList.php?name="+t,function(t,a,r){var s=null;t||200!=a.statusCode?e("getGameList error"):(parseString(r,function(t,e){s=e.Data.Game}),e(s))})},getPlatformSpecifiedGameList:function(t,e,a){var r="http://thegamesdb.net/api/GetGamesList.php?",s="name="+e,n="&platform="+t,i=r+s+n;request(i,function(t,e,r){var s=null;t||200!=e.statusCode?a("getGameList error"):(parseString(r,function(t,e){s=e.Data.Game}),a(s))})},getPlatformList:function(t){request("http://thegamesdb.net/api/GetPlatformsList.php",function(e,a,r){var s=null;e||200!=a.statusCode?t("getPlatformList Error"):(parseString(r,function(t,e){s=e.Data.Platforms[0].Platform}),t(s))})},getGame:function(t,e){request("http://thegamesdb.net/api/GetGame.php?id="+t,function(t,a,r){var s=null;if(t||200!=a.statusCode)e("getGame Error");else{parseString(r,function(t,e){s=e.Data.Game});var n=s[0],i={};if(void 0!==n.Images[0]){var o=n.Images[0];void 0!==o.boxart[0]&&(i.front=o.boxart[0].$,n.BoxArt=i),void 0!==o.boxart[1]&&(i.front=o.boxart[1].$,i.back=o.boxart[0].$,n.BoxArt=i)}e(s)}})}};