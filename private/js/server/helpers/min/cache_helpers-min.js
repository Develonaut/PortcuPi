var request=require("request"),parseString=require("xml2js").parseString,_=require("underscore"),fs=require("fs"),cache_path="./private/js/server/cache/";module.exports={checkCachedData:function(e,t){try{fs.accessSync(cache_path+e+".json",fs.R_OK|fs.W_OK),console.log("Found "+cache_path+e+".json in cache."),t(module.exports.getCache(e))}catch(a){console.log(a),t(!1)}},isCachedFileFresh:function(e,t){expiration_times={test:2,standard:172800,PlatformList:604800},console.log("Checking cache timestamp versus expiry date");var a=Math.floor((new Date).getTime()/1e3),s=a-e,c=expiration_times[t]?expiration_times[t]:expiration_times.standard;return c>s?(console.log("Cache is still fresh"),!0):(console.log("Cache file has expired"),!1)},getCache:function(e,t){try{var a=fs.readFileSync(cache_path+e+".json","utf8"),s=JSON.parse(a),c=module.exports.isCachedFileFresh(s[0].timestamp,e);return c?s:!1}catch(r){console.log(r)}},writeToCache:function(e,t){try{var a={timestamp:Math.floor((new Date).getTime()/1e3)};t.unshift(a),fs.writeFileSync(cache_path+e+".json",JSON.stringify(t)),console.log("Writing"+cache_path+e+".json to cache.")}catch(s){console.log(s)}}};